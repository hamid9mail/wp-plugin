### راهنمای جامع: انواع ماموریت و تکمیل ماموریت توسط دیگران

درخواست شما برای تمرکز بر روی انواع ماموریت‌ها و قابلیت تکمیل آن‌ها توسط دیگران (مهمان، سایر کاربران، مربی) بسیار عالی و کاملاً در راستای ساخت یک سیستم یادگیری تعاملی و اجتماعی است.

بیایید این قابلیت را به طور کامل تشریح کنیم:

---

#### **بخش اول: مکانیزم فنی تکمیل ماموریت توسط دیگران**

اینکه یک کاربر دیگر (مربی، هم‌تیمی، یا حتی یک کاربر مهمان) بتواند یک ماموریت را برای کاربر اصلی تکمیل کند، یک قابلیت کلیدی در سناریوهایی مانند **تایید انجام تمرین**، **ارائه بازخورد** یا **مربی‌گری** است.

**این قابلیت چگونه در سیستم ما پیاده‌سازی شده است؟**

1.  **ماموریت‌های مبتنی بر لینک (Link-Based Missions):**
    *   در سیستم ما، ماموریت‌هایی مانند `referral` (دعوت از دوستان) و `feedback` (دریافت بازخورد) از این مکانیزم استفاده می‌کنند.
    *   سیستم یک **لینک منحصر به فرد** برای کاربر اصلی تولید می‌کند (مثلاً: `https://yoursite.com/feedback-form/?for_user=123`).
    *   کاربر اصلی این لینک را برای دیگران ارسال می‌کند.

2.  **شناسایی کاربر هدف:**
    *   وقتی شخص دیگری (مثلاً یک دوست) روی این لینک کلیک کرده و وارد سایت شما می‌شود، سیستم از طریق پارامتر `for_user=123` متوجه می‌شود که این بازدید یا اقدام، مربوط به کاربر شماره `123` است.

3.  **ثبت اقدام برای کاربر اصلی:**
    *   وقتی آن شخص دوم، فرم بازخورد را ارسال می‌کند یا در سایت ثبت‌نام می‌کند، سیستم یک "شمارنده" یا "متا دیتا" را برای کاربر اصلی (کاربر `123`) به‌روزرسانی می‌کند. مثلاً متای `psych_feedback_received_count` برای او یک واحد افزایش می‌یابد.

4.  **تکمیل خودکار ماموریت:**
    *   هر بار که کاربر اصلی مسیر خود را مشاهده می‌کند، سیستم شرایط ایستگاه را مجدداً بررسی می‌کند. به محض اینکه شمارنده به حد نصاب تعریف شده در `mission_target` (مثلاً `count:3`) برسد، ایستگاه به طور خودکار برای کاربر اصلی تکمیل می‌شود.

**نتیجه‌گیری:** در معماری فعلی، ما یک زیرساخت قوی برای ماموریت‌هایی داریم که تکمیل آن‌ها به اقدام یک شخص ثالث از طریق یک لینک خاص وابسته است.

---

#### **بخش دوم: انواع ماموریت‌های جدید پیشنهادی**

با استفاده از همین مکانیزم، می‌توانیم انواع ماموریت‌های بسیار جذاب و کاربردی دیگری را طراحی و پیاده‌سازی کنیم:

##### **۱. ماموریت "تایید توسط مربی" (Coach Approval)**

*   **سناریو:** دانشجو یک تمرین را انجام می‌دهد (مثلاً یک فایل آپلود می‌کند یا متنی می‌نویسد). اما ایستگاه تا زمانی که مربی او آن را تایید نکرده، تکمیل نمی‌شود.
*   **نحوه پیاده‌سازی:**
    *   **`mission_type="coach_approval"`**
    *   پس از انجام تمرین توسط دانشجو، یک نوتیفیکیشن برای مربی ارسال می‌شود که حاوی یک لینک منحصر به فرد برای تایید است.
    *   مربی روی لینک کلیک کرده، کار دانشجو را مشاهده و با زدن یک دکمه "تایید می‌کنم"، ماموریت را برای دانشجو تکمیل می‌کند.

##### **۲. ماموریت "بازبینی توسط هم‌تیمی" (Peer Review)**

*   **سناریو:** برای تقویت یادگیری گروهی، هر کاربر باید پروژه حداقل دو نفر از هم‌تیمی‌های خود را بازبینی کرده و به آن‌ها بازخورد بدهد.
*   **نحوه پیاده‌سازی:**
    *   **`mission_type="peer_review"`**
    *   **`mission_target="count:2"`**
    *   سیستم به صورت هوشمند، کاربر را به صفحه پروژه دو نفر از هم‌تیمی‌ها که نیاز به بازبینی دارند، هدایت می‌کند. پس از ثبت بازخورد برای دو نفر، ایستگاه تکمیل می‌شود.

##### **۳. ماموریت "رای‌گیری یا نظرسنجی عمومی" (Public Vote/Poll)**

*   **سناریو:** کاربر باید برای پروژه یا ایده خود، تعداد مشخصی رای از دیگر کاربران (یا حتی کاربران مهمان) جمع‌آوری کند.
*   **نحوه پیاده‌سازی:**
    *   **`mission_type="public_vote"`**
    *   **`mission_target="count:10"`**
    *   یک لینک رای‌گیری منحصر به فرد برای کاربر ایجاد می‌شود تا آن را به اشتراک بگذارد. با رسیدن شمارنده آرا به ۱۰، ماموریت تکمیل می‌شود.

##### **۴. ماموریت "مصاحبه یا جلسه آنلاین" (Interview / Meeting)**

*   **سناریو:** کاربر باید برای تکمیل ایستگاه، یک جلسه مشاوره با مربی رزرو و برگزار کند.
*   **نحوه پیاده‌سازی:**
    *   **`mission_type="meeting_completed"`**
    *   این ماموریت می‌تواند با افزونه‌های رزرو جلسه مانند Simply Schedule Appointments یا Calendly ادغام شود.
    *   پس از اینکه جلسه با موفقیت در سیستم رزرو به عنوان "برگزار شده" علامت‌گذاری شد، ایستگاه به طور خودکار برای کاربر تکمیل می‌شود.

---

### **قدم بعدی چیست؟**

همانطور که می‌بینید، زیرساخت فعلی به ما اجازه می‌دهد تا این ماموریت‌های پیشرفته را پیاده‌سازی کنیم. هرکدام از این‌ها یک قابلیت جدید و ارزشمند هستند.

لطفاً بفرمایید که کدام یک از این انواع ماموریت جدید برای شما در اولویت قرار دارد تا کار بر روی طراحی و پیاده‌سازی آن را شروع کنیم. من پیشنهاد می‌کنم با **"تایید توسط مربی" (Coach Approval)** شروع کنیم، زیرا به نظر می‌رسد با مدل کسب و کار شما بیشترین همخوانی را داشته باشد.

منتظر نظر شما هستم.
