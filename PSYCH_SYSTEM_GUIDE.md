# راهنمای کامل سیستم جامع روان گستر (Psych Complete System)

## مقدمه
این راهنما به شما کمک می‌کند تا از تمام قابلیت‌ها و شورت‌کدهای موجود در سیستم جامع روان گستر، به خصوص ماژول قدرتمند مسیر رشد (Path Engine)، به بهترین شکل استفاده کنید. این سیستم برای ایجاد تجربه‌های یادگیری پویا، تعاملی و شخصی‌سازی شده طراحی شده است.

---

## بخش ۱: ماژول مسیر رشد (Path Engine)

### ۱.۱ - مفهوم کلیدی: سیستم مشاهده مربی (Coach Viewing System)
یکی از ویژگی‌های سیستم مسیر رشد، توانایی آن در مدیریت مشاهده مسیر توسط مربیان است. سیستم به خوبی درک می‌کند که آیا یک مربی در حال مشاهده مسیر به جای دانشجو است یا خیر. این قابلیت به شما اجازه می‌دهد تا سناریوهای ارزیابی و بازخورد را بهتر مدیریت کنید. هنگام مشاهده توسط مربی، یک نوار اطلاع‌رسانی در بالای مسیر نمایش داده می‌شود.

---
این ماژول به شما اجازه می‌دهد تا مسیرهای یادگیری پیچیده، شرطی و تعاملی برای کاربران خود بسازید.

### ۱.۲ - شورت‌کد اصلی مسیر: `[psychocourse_path]`
این شورت‌کد به عنوان کانتینر اصلی برای یک مسیر عمل می‌کند و تمام ایستگاه‌ها باید درون آن قرار گیرند.

**ویژگی‌ها:**
*   `display_mode` (نوع: `string`, پیش‌فرض: `timeline`): نحوه نمایش مسیر را تعیین می‌کند. مقادیر مجاز: `timeline`, `accordion`, `cards`, `treasure_map`, `simple_list`.
*   `theme` (نوع: `string`, پیش‌فرض: `default`): تم رنگی مسیر را مشخص می‌کند. مقادیر مجاز: `default`, `dark`, `minimal`, `colorful`.
*   `show_progress` (نوع: `boolean`, پیش‌فرض: `true`): نوار پیشرفت کلی مسیر را نمایش می‌دهد یا پنهان می‌کند.
*   `path_title` (نوع: `string`, پیش‌فرض: `''`): یک عنوان برای کل مسیر نمایش می‌دهد.

---

### ۱.۳ - شورت‌کد ایستگاه: `[station]`
قلب تپنده مسیر شما. هر `[station]` یک مرحله یا ماموریت در مسیر است. در ادامه لیست کامل ویژگی‌های این شورت‌کد قدرتمند آمده است.

**ویژگی‌های اصلی:**
*   `title` (نوع: `string`, **الزامی**): عنوان ایستگاه که به کاربر نمایش داده می‌شود.
*   `station_node_id` (نوع: `string`, **بسیار مهم**): یک شناسه منحصر به فرد برای ایستگاه. اگر این شناسه را مشخص نکنید، به صورت خودکار ساخته می‌شود. اما برای ارجاع به این ایستگاه در پاداش‌ها، حتماً باید یک شناسه مشخص و منحصر به فرد برای آن تعریف کنید.
*   `icon` (نوع: `string`, پیش‌فرض: `fas fa-flag`): آیکون ایستگاه از کتابخانه Font Awesome.

**ویژگی‌های کنترل وضعیت و نمایش:**
*   `unlock_trigger` (نوع: `string`, پیش‌فرض: `sequential`): شرط باز شدن ایستگاه. `sequential` یعنی ایستگاه قبلی باید تکمیل شده باشد. `independent` یعنی باز شدن ایستگاه به مراحل قبلی وابسته نیست و فقط به شروط دیگر (مانند `unlock_condition`) بستگی دارد.
*   `unlock_condition` (نوع: `string`): شروط پیشرفته و ترکیبی برای باز شدن ایستگاه. شرایط با `|` از هم جدا می‌شوند. (مثال: `unlock_condition="has_badge:pro|min_points:500"`)
*   `relation` (نوع: `string`, پیش‌فرض: `AND`): رابطه منطقی بین شروط `unlock_condition`. می‌تواند `AND` یا `OR` باشد.

**ویژگی‌های ماموریت:**
*   `mission_type` (نوع: `string`, پیش‌فرض: `button_click`): نوع ماموریتی که کاربر باید انجام دهد. مقادیر مجاز در بخش سناریوها توضیح داده شده‌اند.
*   `mission_target` (نوع: `string`): هدف ماموریت که به `mission_type` بستگی دارد (مثال: `form_id:7` برای گرویتی فرم، `product_id:101` برای ووکامرس).
*   `mission_button_text` (نوع: `string`, پیش‌فرض: `مشاهده ماموریت`): متن دکمه برای ماموریت‌های نوع `button_click`.

**ویژگی‌های پاداش:**
*   `rewards` (نوع: `string`): پاداش‌هایی که کاربر پس از تکمیل دریافت می‌کند. پاداش‌ها با `|` از هم جدا می‌شوند. (مثال: `add_points:50|award_badge:3|activate_station:secret_mission`)
*   `notification_text` (نوع: `string`): متن سفارشی برای اعلان پاداش‌ها.

---

### ۱.۴ - شورت‌کدهای محتوای ایستگاه
*   `[static_content]...[/static_content]`: محتوای ثابت که همیشه نمایش داده می‌شود.
*   `[mission_content]...[/mission_content]`: محتوای ماموریت که قبل از تکمیل نمایش داده می‌شود.
*   `[result_content]...[/result_content]`: محتوای نتیجه که بعد از تکمیل نمایش داده می‌شود.

---

## بخش ۲: سناریوهای ماموریت

در این بخش، مثال‌های دقیقی برای انواع ماموریت ارائه می‌شود.

### **نکته بسیار مهم برای ماموریت‌های `gform`**
با توجه به اصلاحات جدید، شما دیگر **نیازی ندارید** (و **نباید**) شورت‌کد `[gravityform ...]` را درون محتوای ایستگاه قرار دهید. فقط کافیست `mission_type="gform"` و `mission_target="form_id:..."` را مشخص کنید. **سیستم به طور خودکار فرم را در مکان مناسب نمایش خواهد داد.**

### سناریو ۱: ماموریت از نوع `button_click`
دانشجو با یک کلیک، مطالعه یک بخش را تایید می‌کند.
```html
[station title="مطالعه فصل اول کتاب" mission_type="button_click" mission_button_text="مطالعه کردم و آماده‌ام!"]
  [mission_content]
    <p>پس از مطالعه کامل فصل اول، روی دکمه زیر کلیک کنید تا وارد مرحله بعد شوید.</p>
  [/mission_content]
[/station]
```

### سناریو ۲: ماموریت از نوع `gform` (گرویتی فرم)
دانشجو خودش فرم را پر می‌کند.
```html
[station title="آزمون خودارزیابی" mission_type="gform" mission_target="form_id:10"]
  [mission_content]
    <p>لطفاً فرم زیر را برای ارزیابی هفتگی خود تکمیل کنید.</p>
    <!-- فرم به صورت خودکار در اینجا نمایش داده می‌شود -->
  [/mission_content]
[/station]
```

### سناریو ۳: ماموریت از نوع `purchase` (خرید محصول ووکامرس)
کاربر برای تکمیل ماموریت باید محصولی را خریداری کند.
```html
[station title="خرید کتاب کار" mission_type="purchase" mission_target="product_id:123"]
  [mission_content]
    <p>برای ادامه، باید کتاب کار ویژه این دوره را تهیه کنید.</p>
    <!-- دکمه خرید به صورت خودکار نمایش داده می‌شود -->
  [/mission_content]
[/station]
```

### سناریو ۴: ماموریت از نوع `custom_test` (آزمون سفارشی)
کاربر باید در یک آزمون ساخته شده با ماژول آزمون‌های روانشناسی شرکت کند.
```html
[station title="آزمون شخصیت شناسی" mission_type="custom_test" mission_target="test_id:5"]
  [mission_content]
    <p>در این مرحله، باید در آزمون شخصیت شناسی شرکت کنید.</p>
    <!-- دکمه شروع آزمون به صورت خودکار نمایش داده می‌شود -->
  [/mission_content]
[/station]
```

### سناریو ۵: ماموریت از نوع `achieve_badge` (کسب نشان)
کاربر باید یک نشان خاص را از سیستم گیمیفیکیشن کسب کند.
```html
[station title="کسب نشان مشارکت" mission_type="achieve_badge" mission_target="badge_id:7"]
  [mission_content]
    <p>برای باز کردن این ایستگاه ویژه، باید نشان "مشارکت فعال" را کسب کرده باشید.</p>
  </mission_content>
[/station]
```

### سناریو ۶: ماموریت از نوع `share` (اشتراک‌گذاری)
کاربر باید یک لینک را به اشتراک بگذارد.
```html
[station title="معرفی دوره به دوستان" mission_type="share" mission_target="url:https://yoursite.com/course-page"]
  [mission_content]
    <p>با اشتراک‌گذاری این دوره در شبکه‌های اجتماعی، این مرحله را تکمیل کنید.</p>
    <!-- دکمه‌های اشتراک‌گذاری نمایش داده می‌شود -->
  </mission_content>
[/station]
```

### سناریو ۷: ماموریت از نوع `referral` (دعوت از دوستان)
کاربر باید تعداد مشخصی از دوستان خود را با موفقیت به سایت دعوت کند.
```html
[station title="دعوت از ۵ دوست" mission_type="referral" mission_target="count:5"]
  [mission_content]
    <p>لینک دعوت خود را برای دوستانتان ارسال کنید. پس از ثبت‌نام ۵ نفر از طریق لینک شما، این مرحله تکمیل می‌شود.</p>
    <!-- لینک دعوت و شمارنده نمایش داده می‌شود -->
  </mission_content]
[/station]
```

### سناریو ۸: ماموریت از نوع `feedback` (دریافت بازخورد)
کاربر باید از تعداد مشخصی از افراد بازخورد دریافت کند.
```html
[station title="دریافت بازخورد ۳۶۰ درجه" mission_type="feedback" mission_target="count:3"]
  [mission_content]
    <p>لینک زیر را برای همکاران خود ارسال کنید تا فرم بازخورد را برای شما پر کنند. نیاز به دریافت ۳ بازخورد دارید.</p>
    <!-- لینک ارسال بازخورد و شمارنده نمایش داده می‌شود -->
  </mission_content>
[/station]
```

---

### نکته در مورد سایر ماژول‌ها
این راهنما فقط بر روی ماژول مسیر رشد (Path Engine) تمرکز دارد. برای اطلاعات در مورد ماژول‌های دیگر مانند گیمیفیکیشن، شخصی‌سازی و داشبورد، به راهنمای مربوط به آن‌ها مراجعه کنید.
